<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>环境准备 | 难凉热血</title>
    <meta name="generator" content="VuePress 1.8.2">
    <link rel="icon" href="/Blog/logo.png">
    <meta name="description" content="">
    <meta name="theme-color" content="#3eaf7c">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="msapplication-TileColor" content="#000000">
    
    <link rel="preload" href="/Blog/assets/css/0.styles.dff70739.css" as="style"><link rel="preload" href="/Blog/assets/js/app.8f19096b.js" as="script"><link rel="preload" href="/Blog/assets/js/2.05b34f12.js" as="script"><link rel="preload" href="/Blog/assets/js/84.6b978a07.js" as="script"><link rel="preload" href="/Blog/assets/js/24.09f74994.js" as="script"><link rel="prefetch" href="/Blog/assets/js/10.50bd3c7e.js"><link rel="prefetch" href="/Blog/assets/js/100.f010707d.js"><link rel="prefetch" href="/Blog/assets/js/101.c697bd29.js"><link rel="prefetch" href="/Blog/assets/js/102.ffc46a66.js"><link rel="prefetch" href="/Blog/assets/js/103.4c6703ff.js"><link rel="prefetch" href="/Blog/assets/js/104.f4e1383c.js"><link rel="prefetch" href="/Blog/assets/js/105.7b10a888.js"><link rel="prefetch" href="/Blog/assets/js/106.f5c9a0a2.js"><link rel="prefetch" href="/Blog/assets/js/107.0d441859.js"><link rel="prefetch" href="/Blog/assets/js/108.ca70fb20.js"><link rel="prefetch" href="/Blog/assets/js/109.2a29baf0.js"><link rel="prefetch" href="/Blog/assets/js/11.541b1952.js"><link rel="prefetch" href="/Blog/assets/js/110.453deff5.js"><link rel="prefetch" href="/Blog/assets/js/111.5358d4a8.js"><link rel="prefetch" href="/Blog/assets/js/112.d53f500d.js"><link rel="prefetch" href="/Blog/assets/js/113.6240c374.js"><link rel="prefetch" href="/Blog/assets/js/114.6c16c57e.js"><link rel="prefetch" href="/Blog/assets/js/115.baa2c72e.js"><link rel="prefetch" href="/Blog/assets/js/116.4daeaab2.js"><link rel="prefetch" href="/Blog/assets/js/12.4dc86a6b.js"><link rel="prefetch" href="/Blog/assets/js/13.19f9795d.js"><link rel="prefetch" href="/Blog/assets/js/14.76c07bf3.js"><link rel="prefetch" href="/Blog/assets/js/15.6391c788.js"><link rel="prefetch" href="/Blog/assets/js/16.19751a27.js"><link rel="prefetch" href="/Blog/assets/js/17.e1c007cb.js"><link rel="prefetch" href="/Blog/assets/js/18.fd0fd2a7.js"><link rel="prefetch" href="/Blog/assets/js/19.21a887b8.js"><link rel="prefetch" href="/Blog/assets/js/20.7777d67c.js"><link rel="prefetch" href="/Blog/assets/js/21.4c841cc7.js"><link rel="prefetch" href="/Blog/assets/js/22.a01289c0.js"><link rel="prefetch" href="/Blog/assets/js/23.600d1c1f.js"><link rel="prefetch" href="/Blog/assets/js/25.56d80d7a.js"><link rel="prefetch" href="/Blog/assets/js/26.4dd0bffa.js"><link rel="prefetch" href="/Blog/assets/js/27.03e139d8.js"><link rel="prefetch" href="/Blog/assets/js/28.fa30939e.js"><link rel="prefetch" href="/Blog/assets/js/29.da57b007.js"><link rel="prefetch" href="/Blog/assets/js/3.4304b908.js"><link rel="prefetch" href="/Blog/assets/js/30.a9811344.js"><link rel="prefetch" href="/Blog/assets/js/31.194ee557.js"><link rel="prefetch" href="/Blog/assets/js/32.f996892b.js"><link rel="prefetch" href="/Blog/assets/js/33.e3ad5197.js"><link rel="prefetch" href="/Blog/assets/js/34.0180c1db.js"><link rel="prefetch" href="/Blog/assets/js/35.c7d11f7e.js"><link rel="prefetch" href="/Blog/assets/js/36.ab8921d6.js"><link rel="prefetch" href="/Blog/assets/js/37.abaf179e.js"><link rel="prefetch" href="/Blog/assets/js/38.d8a50e1a.js"><link rel="prefetch" href="/Blog/assets/js/39.80322cef.js"><link rel="prefetch" href="/Blog/assets/js/4.8c4ee646.js"><link rel="prefetch" href="/Blog/assets/js/40.b923e1ea.js"><link rel="prefetch" href="/Blog/assets/js/41.453cc765.js"><link rel="prefetch" href="/Blog/assets/js/42.e28f3825.js"><link rel="prefetch" href="/Blog/assets/js/43.0287de91.js"><link rel="prefetch" href="/Blog/assets/js/44.034518bc.js"><link rel="prefetch" href="/Blog/assets/js/45.ad2ae6c7.js"><link rel="prefetch" href="/Blog/assets/js/46.720bc2e2.js"><link rel="prefetch" href="/Blog/assets/js/47.40da4493.js"><link rel="prefetch" href="/Blog/assets/js/48.e6ccfea5.js"><link rel="prefetch" href="/Blog/assets/js/49.26ba1491.js"><link rel="prefetch" href="/Blog/assets/js/5.845bfbc1.js"><link rel="prefetch" href="/Blog/assets/js/50.121a8fec.js"><link rel="prefetch" href="/Blog/assets/js/51.5ab1f368.js"><link rel="prefetch" href="/Blog/assets/js/52.1389490b.js"><link rel="prefetch" href="/Blog/assets/js/53.baff4daa.js"><link rel="prefetch" href="/Blog/assets/js/54.a6c29759.js"><link rel="prefetch" href="/Blog/assets/js/55.8395bf88.js"><link rel="prefetch" href="/Blog/assets/js/56.2a381b35.js"><link rel="prefetch" href="/Blog/assets/js/57.3bd021b2.js"><link rel="prefetch" href="/Blog/assets/js/58.4757becd.js"><link rel="prefetch" href="/Blog/assets/js/59.c859053e.js"><link rel="prefetch" href="/Blog/assets/js/6.6727fd3a.js"><link rel="prefetch" href="/Blog/assets/js/60.a6daf16f.js"><link rel="prefetch" href="/Blog/assets/js/61.0f85843f.js"><link rel="prefetch" href="/Blog/assets/js/62.b6548010.js"><link rel="prefetch" href="/Blog/assets/js/63.951a2e87.js"><link rel="prefetch" href="/Blog/assets/js/64.722d94a0.js"><link rel="prefetch" href="/Blog/assets/js/65.13144f87.js"><link rel="prefetch" href="/Blog/assets/js/66.12d2bba4.js"><link rel="prefetch" href="/Blog/assets/js/67.686767cc.js"><link rel="prefetch" href="/Blog/assets/js/68.48569d90.js"><link rel="prefetch" href="/Blog/assets/js/69.d8cff1cf.js"><link rel="prefetch" href="/Blog/assets/js/7.49321003.js"><link rel="prefetch" href="/Blog/assets/js/70.f119b9a6.js"><link rel="prefetch" href="/Blog/assets/js/71.fde4607c.js"><link rel="prefetch" href="/Blog/assets/js/72.48d02362.js"><link rel="prefetch" href="/Blog/assets/js/73.4ee64777.js"><link rel="prefetch" href="/Blog/assets/js/74.3089169e.js"><link rel="prefetch" href="/Blog/assets/js/75.214b302b.js"><link rel="prefetch" href="/Blog/assets/js/76.c3c1c8f9.js"><link rel="prefetch" href="/Blog/assets/js/77.d086238d.js"><link rel="prefetch" href="/Blog/assets/js/78.991999a3.js"><link rel="prefetch" href="/Blog/assets/js/79.010ea110.js"><link rel="prefetch" href="/Blog/assets/js/8.d047a346.js"><link rel="prefetch" href="/Blog/assets/js/80.253d7858.js"><link rel="prefetch" href="/Blog/assets/js/81.1781d0f4.js"><link rel="prefetch" href="/Blog/assets/js/82.f7fd0506.js"><link rel="prefetch" href="/Blog/assets/js/83.c199f8fc.js"><link rel="prefetch" href="/Blog/assets/js/85.734987fa.js"><link rel="prefetch" href="/Blog/assets/js/86.8b88a83c.js"><link rel="prefetch" href="/Blog/assets/js/87.4e0c486f.js"><link rel="prefetch" href="/Blog/assets/js/88.7e648971.js"><link rel="prefetch" href="/Blog/assets/js/89.11708280.js"><link rel="prefetch" href="/Blog/assets/js/9.dd57d120.js"><link rel="prefetch" href="/Blog/assets/js/90.255cd203.js"><link rel="prefetch" href="/Blog/assets/js/91.3b65d426.js"><link rel="prefetch" href="/Blog/assets/js/92.b7794634.js"><link rel="prefetch" href="/Blog/assets/js/93.fbef406e.js"><link rel="prefetch" href="/Blog/assets/js/94.ad23c797.js"><link rel="prefetch" href="/Blog/assets/js/95.105df6e1.js"><link rel="prefetch" href="/Blog/assets/js/96.a625808d.js"><link rel="prefetch" href="/Blog/assets/js/97.2b623ab4.js"><link rel="prefetch" href="/Blog/assets/js/98.6bfdf25b.js"><link rel="prefetch" href="/Blog/assets/js/99.7a3350d8.js">
    <link rel="stylesheet" href="/Blog/assets/css/0.styles.dff70739.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/Blog/" class="home-link router-link-active"><img src="/Blog/logo.png" alt="难凉热血" class="logo"> <span class="site-name can-hide">难凉热血</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"> <a href="https://github.com/NLRX-WJC/Blog" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"> <a href="https://github.com/NLRX-WJC/Blog" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><a href="/Blog/about/" class="sidebar-link">关于作者</a></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>React</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>JavaScript</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>webpack</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>TypeScript</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>教兄弟女朋友学Koa2</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/Blog/koa2/00.前言.html" class="sidebar-link">00.前言</a></li><li><a href="/Blog/koa2/01.环境准备.html" class="active sidebar-link">01.环境准备</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/Blog/koa2/01.环境准备.html#_1-node-版本" class="sidebar-link">1. node 版本</a></li><li class="sidebar-sub-header"><a href="/Blog/koa2/01.环境准备.html#_2-创建项目" class="sidebar-link">2. 创建项目</a></li><li class="sidebar-sub-header"><a href="/Blog/koa2/01.环境准备.html#_3-安装-typescript" class="sidebar-link">3. 安装 TypeScript</a></li><li class="sidebar-sub-header"><a href="/Blog/koa2/01.环境准备.html#_4-安装-koa" class="sidebar-link">4. 安装 Koa</a></li><li class="sidebar-sub-header"><a href="/Blog/koa2/01.环境准备.html#_5-安装-nodemon" class="sidebar-link">5. 安装 nodemon</a></li><li class="sidebar-sub-header"><a href="/Blog/koa2/01.环境准备.html#_6-添加-npm-script-项目启动脚本" class="sidebar-link">6. 添加 npm script 项目启动脚本</a></li><li class="sidebar-sub-header"><a href="/Blog/koa2/01.环境准备.html#_7-启动项目" class="sidebar-link">7. 启动项目</a></li></ul></li><li><a href="/Blog/koa2/02.中间件.html" class="sidebar-link">02.中间件</a></li><li><a href="/Blog/koa2/03.路由.html" class="sidebar-link">03.路由</a></li><li><a href="/Blog/koa2/04.解析请求参数.html" class="sidebar-link">04.解析请求参数</a></li><li><a href="/Blog/koa2/05.数据库.html" class="sidebar-link">05.数据库</a></li><li><a href="/Blog/koa2/06.代码分层.html" class="sidebar-link">06.代码分层</a></li><li><a href="/Blog/koa2/07.接口鉴权.html" class="sidebar-link">07.接口鉴权</a></li><li><a href="/Blog/koa2/08.错误处理.html" class="sidebar-link">08.错误处理</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>数据结构</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>剑指offer-JavaScript题解</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>使用TypeScript重构axios</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>逐行剖析Vue.js源码</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h2 id="_1-node-版本"><a href="#_1-node-版本" class="header-anchor">#</a> 1. node 版本</h2> <p>由于 <code>koa2</code> 已经开始使用 <code>async/await</code> 等新语法，所以请保证 <code>node</code> 环境在 <code>7.6</code> 版本以上。</p> <h2 id="_2-创建项目"><a href="#_2-创建项目" class="header-anchor">#</a> 2. 创建项目</h2> <p>首先，创建一个目录 <code>koa2-tutorial/</code> 用来存放我们的代码。然后执行如下命令，开始初始化项目：</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token comment"># 创建 package.json 文件。该文件用于管理项目中用到一些安装包</span>
<span class="token function">npm</span> init -y
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>项目初始化完成后，在创建的目录里，会生成 <code>package.json</code> 文件。</p> <h2 id="_3-安装-typescript"><a href="#_3-安装-typescript" class="header-anchor">#</a> 3. 安装 TypeScript</h2> <p><code>TypeScript</code> 目前已逐渐成为前端项目开发的基础配置，所以本系列教程也基于 <code>TypeScript</code> 进行开发。</p> <p>请在项目的根目录下运行如下命令，安装 <code>TypeScript</code> :</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token function">npm</span> i typescript -D
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>安装成功之后，我们需要先创建 <code>TypeScript</code> 的编译配置文件 <code>tsconfig.json</code> ，继续在根目录下执行如下命令：</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>npx tsc -init
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>执行完之后，根目录下会生成一个 <code>tsconfig.json</code> 文件，根据实际项目的需求可对该文件内的内容进行修改，本项目的 <code>tsconfig.json</code> 文件配置如下：</p> <div class="language-json line-numbers-mode"><pre class="language-json"><code><span class="token comment">// tsconfig.json</span>
<span class="token punctuation">{</span>
  <span class="token property">&quot;compilerOptions&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;target&quot;</span><span class="token operator">:</span> <span class="token string">&quot;es2017&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;module&quot;</span><span class="token operator">:</span> <span class="token string">&quot;commonjs&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;allowJs&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token property">&quot;sourceMap&quot;</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
    <span class="token property">&quot;outDir&quot;</span><span class="token operator">:</span> <span class="token string">&quot;./dist&quot;</span> <span class="token comment">/* 将编译结果输出到该目录中 */</span><span class="token punctuation">,</span>
    <span class="token property">&quot;noImplicitAny&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token property">&quot;include&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;src/**/*&quot;</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><p>至此， <code>TypeScript</code> 安装完毕。</p> <h2 id="_4-安装-koa"><a href="#_4-安装-koa" class="header-anchor">#</a> 4. 安装 Koa</h2> <p>接下来，继续在根目录下执行如下命令，安装 <code>Koa</code> 和类型文件 <code>@types/koa</code> ：</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token comment"># 安装koa</span>
<span class="token function">npm</span> i koa -S

<span class="token comment"># 安装koa的类型文件</span>
<span class="token function">npm</span> i @types/koa -D
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>安装成功后，我们在根目录下创建 <code>src</code> 文件夹，并创建 <code>src/app.ts</code> 文件 ，写入如下代码：</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">import</span> <span class="token operator">*</span> <span class="token keyword">as</span> Koa <span class="token keyword">from</span> <span class="token string">&quot;koa&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> app <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Koa</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

app<span class="token punctuation">.</span><span class="token function">listen</span><span class="token punctuation">(</span><span class="token number">3000</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;server is running at http://localhost:3000&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h2 id="_5-安装-nodemon"><a href="#_5-安装-nodemon" class="header-anchor">#</a> 5. 安装 nodemon</h2> <p><code>nodemon</code> 是一款非常实用的工具，用来监控你 node.js 源代码的任何变化和自动重启你的服务器。以前，我们开发一个 <code>node</code> 后端服务时，每次更改文件，均需重启一下服务才能生效。使得我们的开发效率降低了很多。 <code>nodemon</code> 的出现，可以随时监听文件的变更，自动重启服务，我们开发时只需关注代码即可，不再需要手动重启服务。</p> <p>在项目的根目录下运行如下命令，安装 <code>nodemon</code> :</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token function">npm</span> i nodemon -D
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>安装成功之后，我们需要创建 <code>nodemon</code> 的编译配置文件 <code>nodemon.json</code> ，并向其写入如下内容：</p> <div class="language-json line-numbers-mode"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;ignore&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token string">&quot;.git&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;.vscode&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;.idea&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;node_modules/&quot;</span>
  <span class="token punctuation">]</span> <span class="token comment">/* 忽略监听的文件目录 */</span><span class="token punctuation">,</span>
  <span class="token property">&quot;watch&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token string">&quot;src&quot;</span>
  <span class="token punctuation">]</span> <span class="token comment">/* 需要监听的文件目录，该目录下任意文件发生变化，都会重启服务 */</span><span class="token punctuation">,</span>
  <span class="token property">&quot;exec&quot;</span><span class="token operator">:</span> <span class="token string">&quot;npm start&quot;</span> <span class="token comment">/* 重启服务时执行的命令，为npm script的start脚本 */</span><span class="token punctuation">,</span>
  <span class="token property">&quot;ext&quot;</span><span class="token operator">:</span> <span class="token string">&quot;ts&quot;</span> <span class="token comment">/* 监听的文件后缀 */</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><h2 id="_6-添加-npm-script-项目启动脚本"><a href="#_6-添加-npm-script-项目启动脚本" class="header-anchor">#</a> 6. 添加 npm script 项目启动脚本</h2> <p>打开 <code>package.json</code> 文件，并在 <code>script</code> 中添加如下内容：</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token string">&quot;scripts&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
  <span class="token string">&quot;start&quot;</span><span class="token operator">:</span> <span class="token string">&quot;tsc &amp;&amp; node dist/app.js&quot;</span><span class="token punctuation">,</span>
  <span class="token string">&quot;dev&quot;</span><span class="token operator">:</span> <span class="token string">&quot;nodemon&quot;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>我们在 <code>script</code> 中添加了两个脚本命令，分别名为： <code>start</code> 和 <code>dev</code> 。我们分别解释下这两个脚本的作用。</p> <ul><li><strong><code>start</code></strong>: 这行脚本中包含了两部分内容： <code>tsc</code> 和 <code>node dist/app.js</code> 。<code>tsc</code> 是将项目中的 <code>.ts</code> 文件编译成 <code>js</code>；<code>node dist/app.js</code> 是执行 <code>dist</code> 目录下的 <code>app.js</code> 文件。由于我们在 <code>tsconfig.json</code> 中将 <code>tsc</code> 的编译结果输出目录设置为根目录下的 <code>dist</code> 文件夹，所以需要执行最终编译生成的 <code>dist/app.js</code> 。这两部分内容使用 <code>&amp;&amp;</code> 连接，表示这两条命令是<strong>继发执行</strong>关系。所谓继发执行，就是指前一条命令执行成功后再执行后一条命令。由于我们的项目是用 <code>TypeScript</code> 进行开发的，所以在启动项目的时候需要先将 <code>ts</code> 编译成 <code>js</code> 。等待编译完成后就可以使用 <code>node app.js</code> 启动项目了。</li> <li><strong>dev</strong>: 这行脚本是启动 <code>nodemon</code> 并使用根目录下的 <code>nodemon.json</code> 作为配置文件。</li></ul> <h2 id="_7-启动项目"><a href="#_7-启动项目" class="header-anchor">#</a> 7. 启动项目</h2> <p>Ok，到这里后，我们就可以开始启动项目了，请在根目录下执行如下命令：</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token function">npm</span> run dev
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>此时命令行中会输出如下内容：</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>$ <span class="token function">npm</span> run dev

<span class="token operator">&gt;</span> ts_koa2@1.0.0 dev /Users/nlrx/code/ts_koa2
<span class="token operator">&gt;</span> nodemon

<span class="token punctuation">[</span>nodemon<span class="token punctuation">]</span> <span class="token number">2.0</span>.7
<span class="token punctuation">[</span>nodemon<span class="token punctuation">]</span> to restart at any time, enter <span class="token variable"><span class="token variable">`</span>rs<span class="token variable">`</span></span>
<span class="token punctuation">[</span>nodemon<span class="token punctuation">]</span> watching path<span class="token punctuation">(</span>s<span class="token punctuation">)</span>: src/**/*
<span class="token punctuation">[</span>nodemon<span class="token punctuation">]</span> watching extensions: ts
<span class="token punctuation">[</span>nodemon<span class="token punctuation">]</span> starting <span class="token variable"><span class="token variable">`</span><span class="token function">npm</span> start<span class="token variable">`</span></span>

<span class="token operator">&gt;</span> ts_koa2@1.0.0 start /Users/nlrx/code/ts_koa2
<span class="token operator">&gt;</span> tsc <span class="token operator">&amp;&amp;</span> node dist/app.js

server is running at http://localhost:3000

<span class="token punctuation">..</span>.
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><p>至此，开发环境就已经搭建成功了！</p> <p>最终得到的项目目录结构如下：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>├─src
│ ├─app.ts
├── package.json
├── tsconfig.json
├── nodemon.json
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/NLRX-WJC/Blog/edit/master/docs/koa2/01.环境准备.md" target="_blank" rel="noopener noreferrer">在 GitHub 上编辑此页</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <div class="last-updated"><span class="prefix">上次更新:</span> <span class="time">1/12/2021, 6:37:38 AM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/Blog/koa2/00.前言.html" class="prev">
        00.前言
      </a></span> <span class="next"><a href="/Blog/koa2/02.中间件.html">
        02.中间件
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"><!----><!----></div></div>
    <script src="/Blog/assets/js/app.8f19096b.js" defer></script><script src="/Blog/assets/js/2.05b34f12.js" defer></script><script src="/Blog/assets/js/84.6b978a07.js" defer></script><script src="/Blog/assets/js/24.09f74994.js" defer></script>
  </body>
</html>
